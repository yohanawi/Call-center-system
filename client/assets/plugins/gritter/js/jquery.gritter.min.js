!function(e){e.gritter={},e.gritter.options={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3},e.gritter.add=function(e){try{return t.add(e||{})}catch(n){var i="Gritter Error: "+n;"undefined"!=typeof console&&console.error?console.error(i,e):alert(i)}},e.gritter.remove=function(e,n){t.removeSpecific(e,n||{})},e.gritter.removeAll=function(e){t.stop(e||{})};var t={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<div class="gritter-close"></div>',_tpl_title:'<span class="gritter-title">[[title]]</span>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none"><div class="gritter-top"></div><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]">[[title]]<p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(n){if("string"==typeof n&&(n={text:n}),!n.text)throw'You must supply "text" parameter.';this._is_setup||this._runSetup();var i=n.title,o=n.text,a=n.image||"",r=n.sticky||!1,s=n.class_name||e.gritter.options.class_name,l=e.gritter.options.position,c=n.time||"";this._verifyWrapper(),this._item_count++;var u=this._item_count,d=this._tpl_item;e(["before_open","after_open","before_close","after_close"]).each(function(i,o){t["_"+o+"_"+u]=e.isFunction(n[o])?n[o]:function(){}}),this._custom_timer=0,c&&(this._custom_timer=c);var h=""!=a?'<img src="'+a+'" class="gritter-image" />':"",f=""!=a?"gritter-with-image":"gritter-without-image";if(i=i?this._str_replace("[[title]]",i,this._tpl_title):"",d=this._str_replace(["[[title]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[i,o,this._tpl_close,h,this._item_count,f,s],d),this["_before_open_"+u]()===!1)return!1;e("#gritter-notice-wrapper").addClass(l).append(d);var p=e("#gritter-item-"+this._item_count);return p.fadeIn(this.fade_in_speed,function(){t["_after_open_"+u](e(this))}),r||this._setFadeTimer(p,u),e(p).bind("mouseenter mouseleave",function(n){"mouseenter"==n.type?r||t._restoreItemIfFading(e(this),u):r||t._setFadeTimer(e(this),u),t._hoverState(e(this),n.type)}),e(p).find(".gritter-close").click(function(){t.removeSpecific(u,{},null,!0)}),u},_countRemoveWrapper:function(t,n,i){n.remove(),this["_after_close_"+t](n,i),0==e(".gritter-item-wrapper").length&&e("#gritter-notice-wrapper").remove()},_fade:function(e,n,i,o){var i=i||{},a="undefined"!=typeof i.fade?i.fade:!0,r=i.speed||this.fade_out_speed,s=o;this["_before_close_"+n](e,s),o&&e.unbind("mouseenter mouseleave"),a?e.animate({opacity:0},r,function(){e.animate({height:0},300,function(){t._countRemoveWrapper(n,e,s)})}):this._countRemoveWrapper(n,e)},_hoverState:function(e,t){"mouseenter"==t?(e.addClass("hover"),e.find(".gritter-close").show()):(e.removeClass("hover"),e.find(".gritter-close").hide())},removeSpecific:function(t,n,i,o){if(!i)var i=e("#gritter-item-"+t);this._fade(i,t,n||{},o)},_restoreItemIfFading:function(e,t){clearTimeout(this["_int_id_"+t]),e.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in e.gritter.options)this[opt]=e.gritter.options[opt];this._is_setup=1},_setFadeTimer:function(e,n){var i=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+n]=setTimeout(function(){t._fade(e,n)},i)},stop:function(t){var n=e.isFunction(t.before_close)?t.before_close:function(){},i=e.isFunction(t.after_close)?t.after_close:function(){},o=e("#gritter-notice-wrapper");n(o),o.fadeOut(function(){e(this).remove(),i()})},_str_replace:function(e,t,n,i){var o=0,a=0,r="",s="",l=0,c=0,u=[].concat(e),d=[].concat(t),h=n,f=d instanceof Array,p=h instanceof Array;for(h=[].concat(h),i&&(this.window[i]=0),o=0,l=h.length;l>o;o++)if(""!==h[o])for(a=0,c=u.length;c>a;a++)r=h[o]+"",s=f?void 0!==d[a]?d[a]:"":d[0],h[o]=r.split(u[a]).join(s),i&&h[o]!==r&&(this.window[i]+=(r.length-h[o].length)/u[a].length);return p?h:h[0]},_verifyWrapper:function(){0==e("#gritter-notice-wrapper").length&&e("body").append(this._tpl_wrap)}}}(jQuery);