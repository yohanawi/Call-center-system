Rickshaw.namespace("Rickshaw.Series.FixedDuration"),Rickshaw.Series.FixedDuration=Rickshaw.Class.create(Rickshaw.Series,{initialize:function(l,e,t){if(t=t||{},"undefined"==typeof t.timeInterval)throw new Error("FixedDuration series requires timeInterval");if("undefined"==typeof t.maxDataPoints)throw new Error("FixedDuration series requires maxDataPoints");if(this.palette=new Rickshaw.Color.Palette(e),this.timeBase="undefined"==typeof t.timeBase?Math.floor((new Date).getTime()/1e3):t.timeBase,this.setTimeInterval(t.timeInterval),this[0]&&this[0].data&&this[0].data.length?(this.currentSize=this[0].data.length,this.currentIndex=this[0].data.length):(this.currentSize=0,this.currentIndex=0),this.maxDataPoints=t.maxDataPoints,l&&"object"==typeof l&&Array.isArray(l)&&(l.forEach(function(l){this.addItem(l)},this),this.currentSize+=1,this.currentIndex+=1),this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval,"undefined"!=typeof this.maxDataPoints&&this.currentSize<this.maxDataPoints)for(var n=this.maxDataPoints-this.currentSize-1;n>1;n--)this.currentSize+=1,this.currentIndex+=1,this.forEach(function(l){l.data.unshift({x:((n-1)*this.timeInterval||1)+this.timeBase,y:0,i:n})},this)},addData:function(l,e,t){if(l(e,t),this.currentSize+=1,this.currentIndex+=1,void 0!==this.maxDataPoints)for(;this.currentSize>this.maxDataPoints;)this.dropData()},dropData:function(){this.forEach(function(l){l.data.splice(0,1)}),this.currentSize-=1},getIndex:function(){return this.currentIndex}});