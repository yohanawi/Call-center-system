Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Toggle"),Rickshaw.Graph.Behavior.Series.Toggle=function(l){this.graph=l.graph,this.legend=l.legend;var e=this;this.addAnchor=function(l){var t=document.createElement("a");t.innerHTML="&#10004;",t.classList.add("action"),l.element.insertBefore(t,l.element.firstChild),t.onclick=function(){if(l.series.disabled)l.series.enable(),l.element.classList.remove("disabled");else{if(this.graph.series.filter(function(l){return!l.disabled}).length<=1)return;l.series.disable(),l.element.classList.add("disabled")}}.bind(this);var n=l.element.getElementsByTagName("span")[0];n.onclick=function(){var t=l.series.disabled;if(!t)for(var n=0;n<e.legend.lines.length;n++){var i=e.legend.lines[n];if(l.series===i.series);else if(!i.series.disabled){t=!0;break}}t?(l.series.enable(),l.element.classList.remove("disabled"),e.legend.lines.forEach(function(e){l.series===e.series||(e.series.disable(),e.element.classList.add("disabled"))})):e.legend.lines.forEach(function(l){l.series.enable(),l.element.classList.remove("disabled")})}},this.legend&&("undefined"!=typeof $&&$(this.legend.list).sortable&&$(this.legend.list).sortable({start:function(l,e){e.item.bind("no.onclick",function(l){l.preventDefault()})},stop:function(l,e){setTimeout(function(){e.item.unbind("no.onclick")},250)}}),this.legend.lines.forEach(function(l){e.addAnchor(l)})),this._addBehavior=function(){this.graph.series.forEach(function(l){l.disable=function(){if(e.graph.series.length<=1)throw"only one series left";l.disabled=!0,e.graph.update()},l.enable=function(){l.disabled=!1,e.graph.update()}})},this._addBehavior(),this.updateBehaviour=function(){this._addBehavior()}};