Rickshaw.namespace("Rickshaw.Graph.Ajax"),Rickshaw.Graph.Ajax=Rickshaw.Class.create({initialize:function(l){this.dataURL=l.dataURL,this.onData=l.onData||function(l){return l},this.onComplete=l.onComplete||function(){},this.onError=l.onError||function(){},this.args=l,this.request()},request:function(){$.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){console.log("error loading dataURL: "+this.dataURL),this.onError(this)},success:function(l){l=this.onData(l),this.args.series=this._splice({data:l,series:this.args.series}),this.graph=this.graph||new Rickshaw.Graph(this.args),this.graph.render(),this.onComplete(this)},_splice:function(l){var e=l.data,t=l.series;return l.series?(t.forEach(function(l){var t=l.key||l.name;if(!t)throw"series needs a key or a name";e.forEach(function(e){var n=e.key||e.name;if(!n)throw"data needs a key or a name";if(t==n){var i=["color","name","data"];i.forEach(function(t){e[t]&&(l[t]=e[t])})}})}),t):e}});