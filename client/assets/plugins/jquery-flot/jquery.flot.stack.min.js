!function(e){function t(e){function t(e,t){for(var n=null,i=0;i<t.length&&e!=t[i];++i)t[i].stack==e.stack&&(n=t[i]);return n}function n(e,n,i){if(null!=n.stack){var o=t(n,e.getData());if(o){for(var a,r,s,l,c,u,d,h=i.pointsize,f=i.points,p=o.datapoints.pointsize,g=o.datapoints.points,v=[],b=n.lines.show,T=n.bars.horizontal,C=h>2&&(T?i.format[2].x:i.format[2].y),y=b&&n.lines.steps,E=!0,D=T?1:0,_=T?0:1,I=0,S=0;;){if(I>=f.length)break;if(d=v.length,null==f[I]){for(m=0;h>m;++m)v.push(f[I+m]);I+=h}else if(S>=g.length){if(!b)for(m=0;h>m;++m)v.push(f[I+m]);I+=h}else if(null==g[S]){for(m=0;h>m;++m)v.push(null);E=!0,S+=p}else{if(a=f[I+D],r=f[I+_],l=g[S+D],c=g[S+_],u=0,a==l){for(m=0;h>m;++m)v.push(f[I+m]);v[d+_]+=c,u=c,I+=h,S+=p}else if(a>l){if(b&&I>0&&null!=f[I-h]){for(s=r+(f[I-h+_]-r)*(l-a)/(f[I-h+D]-a),v.push(l),v.push(s+c),m=2;h>m;++m)v.push(f[I+m]);u=c}S+=p}else{if(E&&b){I+=h;continue}for(m=0;h>m;++m)v.push(f[I+m]);b&&S>0&&null!=g[S-p]&&(u=c+(g[S-p+_]-c)*(a-l)/(g[S-p+D]-l)),v[d+_]+=u,I+=h}E=!1,d!=v.length&&C&&(v[d+2]+=u)}if(y&&d!=v.length&&d>0&&null!=v[d]&&v[d]!=v[d-h]&&v[d+1]!=v[d-h+1]){for(m=0;h>m;++m)v[d+h+m]=v[d+m];v[d+1]=v[d-h+1]}}i.points=v}}}e.hooks.processDatapoints.push(n)}var n={series:{stack:null}};e.plot.plugins.push({init:t,options:n,name:"stack",version:"1.2"})}(jQuery);